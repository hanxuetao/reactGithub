{"version":3,"file":"static/webpack/static/development/pages/_app.js.5b82d70a4381763cca4d.hot-update.js","sources":["webpack:///./lib/withRedux.js"],"sourcesContent":["import React from 'react'\nimport createStore from '../store/store'\n\nconst isServer = typeof window === 'undefined'\nconst __NEXT_REDUX_STORE__ = '__NEXT_REDUX_STORE__'\n\nfunction getOrCreateStore(initialState){\n    if(isServer){\n        return createStore(initialState)\n    }\n    if(!window[__NEXT_REDUX_STORE__]){\n        window[__NEXT_REDUX_STORE__] = createStore(initialState)\n    }\n    return window[__NEXT_REDUX_STORE__]\n}\n\n// At that time client will declare a new store object\n//\nexport default (Comp) => {\n    class WithReduxApp extends React.Component {\n        constructor(props){\n            super(props)\n            this.reduxStore = getOrCreateStore(props.initialReduxState)\n        }\n        render() {\n            const { Component, pageProps, ...rest} = this.props\n            console.log(Component, pageProps)\n            if(pageProps){\n                pageProps.test = '123'\n            }\n            return <Comp\n                Component={Component}\n                pageProps={pageProps}\n                {...rest}\n                reduxStore={this.reduxStore}\n            />\n        }\n    }\n\n    // if the hoc package the component, the hoc should inherit getInitialProps from the Component\n    // getInitialProps will be loaded when 1.server side render. 2.client side page loaded.\n    // once redux-store need to be loaded at server side. That will be better about put store initialization in getInitialProps.\n    // then the store will be rendered on html\n    WithReduxApp.getInitialProps = async (ctx) => {\n        const reduxStore = getOrCreateStore()\n        ctx.reduxStore = reduxStore\n\n        let appProps = {}\n        if(typeof Comp.getInitialProps === 'function') {\n            appProps = await Comp.getInitialProps(ctx)\n        }\n   // only State with in store need to be ser\n    return {\n        ...appProps,\n        initialReduxState: reduxStore.getState()\n      }\n    }\n    return WithReduxApp\n}"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AAGA;AACA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AACA;AADA;AACA;AAAA;AACA;AAFA;AAGA;AACA;AANA;AAAA;AAAA;AAMA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AAFA;AAIA;AAJA;AAMA;AAlBA;AACA;AADA;AAAA;AAsBA;AACA;AACA;AACA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAEA;AACA;AALA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AACA;AADA;AAMA;AACA;AAPA;AAAA;AAWA;AAXA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AAaA;AACA;;;;A","sourceRoot":""}