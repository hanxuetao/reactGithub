{"version":3,"file":"static/webpack/static/development/pages/_app.js.2bbc2e5e2785debc2ade.hot-update.js","sources":["webpack:///./lib/withRedux.js"],"sourcesContent":["import React from 'react'\nimport createStore from '../store/store'\n\nconst isServer = typeof window === 'undefined'\nconst __NEXT_REDUX_STORE__ = '__NEXT_REDUX_STORE__'\n\nfunction getOrCreateStore(initialState){\n    if(isServer){\n        return createStore(initialState)\n    }\n    if(!window[__NEXT_REDUX_STORE__]){\n        window[__NEXT_REDUX_STORE__] = createStore(initialState)\n    }\n    return window[__NEXT_REDUX_STORE__]\n}\n\nexport default (Comp) => {\n    class WithReduxApp extends React.Component {\n        constructor(props){\n            super(props)\n            this.reduxStore = getOrCreateStore(props.initialReduxState)\n        }\n        render() {\n            const { Component, pageProps, ...rest} = this.props\n            console.log(Component, pageProps)\n            if(pageProps){\n                pageProps.test = '123'\n            }\n            return <Comp\n                Component={Component}\n                pageProps={pageProps}\n                {...rest}\n                reduxStore={this.reduxStore}\n            />\n        }\n    }\n\n    //if the hoc package the component, the hoc should inherit getInitialProps from the Component\n    WithReduxApp.getInitialProps = async (ctx) => {\n        let appProps = {}\n        if(typeof Comp.getInitialProps === 'function') {\n            appProps = await Comp.getInitialProps(ctx)\n        }\n        const reduxStore = getOrCreateStore()\n\n    return {\n        ...appProps,\n        initialReduxState: reduxStore.getState()\n      }\n    }\n    return WithReduxApp\n}"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AACA;AADA;AACA;AAAA;AACA;AAFA;AAGA;AACA;AANA;AAAA;AAAA;AAMA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AAFA;AAIA;AAJA;AAMA;AAlBA;AACA;AADA;AAAA;AACA;AACA;AAoBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAFA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AACA;AADA;AAGA;AACA;AAJA;AAKA;AALA;AASA;AATA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AAWA;AACA;;;;A","sourceRoot":""}